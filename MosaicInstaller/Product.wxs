<?xml version="1.0" encoding="UTF-8"?>
<?define bin = ..\..\..\bin\ ?>
<?define MAINEXE=$(var.Mosaic.TargetFileName)?>
<?define VERSION=!(bind.FileVersion.$(var.MAINEXE))?> 
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
	<Product Id="*" Name="MosaicInstaller" Language="1033" Version="$(var.VERSION)" Manufacturer="Quider Software" UpgradeCode="624a7393-71ed-45f4-a128-5e9f4cd4ec70">
		<Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" />
    
    <UIRef Id="WixUI_FeatureTree" />
    
    
		<MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />
		<MediaTemplate EmbedCab="yes" />

		<Feature Id="ProductFeature" Title="MosaicInstaller" Level="1" ConfigurableDirectory="INSTALLFOLDER">
			<ComponentGroupRef Id="ProductComponents" />
      <ComponentGroupRef Id="TranslationsGroup"/>
		</Feature>
	</Product>

	<Fragment>
		<Directory Id="TARGETDIR" Name="SourceDir">
			<Directory Id="ProgramFilesFolder">
				<Directory Id="INSTALLFOLDER" Name="Mosaic">
          <Directory Id="pl"></Directory>  
        </Directory>
			</Directory>
		</Directory>
	</Fragment>

	<Fragment>
		<ComponentGroup Id="ProductComponents" Directory="INSTALLFOLDER">
			<Component Id="ProductComponent" Guid="{3B9C53F9-B0F1-47F5-A124-AEA2FB00E863}"> 
				<File Source="$(var.bin)$(var.Configuration)\Mosaic.exe"></File>
        <File Source="$(var.bin)$(var.Configuration)\Mosaic.exe.config"></File>
        <File Source="$(var.bin)$(var.Configuration)\log4net.dll"></File>
			</Component>
		</ComponentGroup>
  
  <ComponentGroup Id="TranslationsGroup" Directory="INSTALLFOLDER">
    <Component Id="polish" Guid="{066502E1-A756-4F63-88CF-EF02BAC9EE7A}">
      <CreateFolder Directory="pl"></CreateFolder>
      <File Source="$(var.bin)$(var.Configuration)\pl\Mosaic.resources.dll"></File>
    </Component>
  </ComponentGroup>
	</Fragment>
</Wix>